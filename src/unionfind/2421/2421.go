package main

import "sort"

//ç»™ä½ ä¸€æ£µ n ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼ˆè¿é€šæ— å‘æ— ç¯çš„å›¾ï¼‰ï¼ŒèŠ‚ç‚¹ç¼–å·ä» 0 åˆ° n - 1 ä¸”æ°å¥½æœ‰ n - 1 æ¡è¾¹ã€‚
//
// ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n ä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ vals ï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚åŒæ—¶ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ edges ï¼Œå…¶ä¸­ edges[i] = [
//ai, bi] è¡¨ç¤ºèŠ‚ç‚¹ ai å’Œ bi ä¹‹é—´æœ‰ä¸€æ¡ æ— å‘ è¾¹ã€‚
//
// ä¸€æ¡ å¥½è·¯å¾„ éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
//
//
// å¼€å§‹èŠ‚ç‚¹å’Œç»“æŸèŠ‚ç‚¹çš„å€¼ ç›¸åŒ ã€‚
// å¼€å§‹èŠ‚ç‚¹å’Œç»“æŸèŠ‚ç‚¹ä¸­é—´çš„æ‰€æœ‰èŠ‚ç‚¹å€¼éƒ½ å°äºç­‰äº å¼€å§‹èŠ‚ç‚¹çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯è¯´å¼€å§‹èŠ‚ç‚¹çš„å€¼åº”è¯¥æ˜¯è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„æœ€å¤§å€¼ï¼‰ã€‚
//
//
// è¯·ä½ è¿”å›ä¸åŒå¥½è·¯å¾„çš„æ•°ç›®ã€‚
//
// æ³¨æ„ï¼Œä¸€æ¡è·¯å¾„å’Œå®ƒåå‘çš„è·¯å¾„ç®—ä½œ åŒä¸€ è·¯å¾„ã€‚æ¯”æ–¹è¯´ï¼Œ 0 -> 1 ä¸ 1 -> 0 è§†ä¸ºåŒä¸€æ¡è·¯å¾„ã€‚å•ä¸ªèŠ‚ç‚¹ä¹Ÿè§†ä¸ºä¸€æ¡åˆæ³•è·¯å¾„ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//
// è¾“å…¥ï¼švals = [1,3,2,1,3], edges = [[0,1],[0,2],[2,3],[2,4]]
//è¾“å‡ºï¼š6
//è§£é‡Šï¼šæ€»å…±æœ‰ 5 æ¡å•ä¸ªèŠ‚ç‚¹çš„å¥½è·¯å¾„ã€‚
//è¿˜æœ‰ 1 æ¡å¥½è·¯å¾„ï¼š1 -> 0 -> 2 -> 4 ã€‚
//ï¼ˆåæ–¹å‘çš„è·¯å¾„ 4 -> 2 -> 0 -> 1 è§†ä¸ºè·Ÿ 1 -> 0 -> 2 -> 4 ä¸€æ ·çš„è·¯å¾„ï¼‰
//æ³¨æ„ 0 -> 2 -> 3 ä¸æ˜¯ä¸€æ¡å¥½è·¯å¾„ï¼Œå› ä¸º vals[2] > vals[0] ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//
// è¾“å…¥ï¼švals = [1,1,2,2,3], edges = [[0,1],[1,2],[2,3],[2,4]]
//è¾“å‡ºï¼š7
//è§£é‡Šï¼šæ€»å…±æœ‰ 5 æ¡å•ä¸ªèŠ‚ç‚¹çš„å¥½è·¯å¾„ã€‚
//è¿˜æœ‰ 2 æ¡å¥½è·¯å¾„ï¼š0 -> 1 å’Œ 2 -> 3 ã€‚
//
//
// ç¤ºä¾‹ 3ï¼š
//
//
//
// è¾“å…¥ï¼švals = [1], edges = []
//è¾“å‡ºï¼š1
//è§£é‡Šï¼šè¿™æ£µæ ‘åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥åªæœ‰ä¸€æ¡å¥½è·¯å¾„ã€‚
//
//
//
//
// æç¤ºï¼š
//
//
// n == vals.length
// 1 <= n <= 3 * 10â´
// 0 <= vals[i] <= 10âµ
// edges.length == n - 1
// edges[i].length == 2
// 0 <= ai, bi < n
// ai != bi
// edges è¡¨ç¤ºä¸€æ£µåˆæ³•çš„æ ‘ã€‚
//
//
// Related Topics æ ‘ å¹¶æŸ¥é›† å›¾ æ•°ç»„ å“ˆå¸Œè¡¨ æ’åº ğŸ‘ 86 ğŸ‘ 0

// leetcode submit region begin(Prohibit modification and deletion)
func numberOfGoodPaths(vals []int, edges [][]int) int {
	n := len(vals)
	g := make([][]int, n)
	for _, e := range edges {
		x, y := e[0], e[1]
		g[x] = append(g[x], y)
		g[y] = append(g[y], x) // å»ºå›¾
	}

	// å¹¶æŸ¥é›†æ¨¡æ¿
	fa := make([]int, n)
	// size[x] è¡¨ç¤ºèŠ‚ç‚¹å€¼ç­‰äº vals[x] çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œ
	// å¦‚æœæŒ‰ç…§èŠ‚ç‚¹å€¼ä»å°åˆ°å¤§åˆå¹¶ï¼Œsize[x] ä¹Ÿæ˜¯è¿é€šå—å†…çš„ç­‰äºæœ€å¤§èŠ‚ç‚¹å€¼çš„èŠ‚ç‚¹ä¸ªæ•°
	size := make([]int, n)
	id := make([]int, n) // åé¢æ’åºç”¨
	for i := range fa {
		fa[i] = i
		size[i] = 1
		id[i] = i
	}
	var find func(int) int
	find = func(x int) int {
		if fa[x] != x {
			fa[x] = find(fa[x])
		}
		return fa[x]
	}

	ans := n // å•ä¸ªèŠ‚ç‚¹çš„å¥½è·¯å¾„
	sort.Slice(id, func(i, j int) bool { return vals[id[i]] < vals[id[j]] })
	for _, x := range id {
		vx := vals[x]
		fx := find(x)
		for _, y := range g[x] {
			y = find(y)
			if y == fx || vals[y] > vx {
				continue // åªè€ƒè™‘æœ€å¤§èŠ‚ç‚¹å€¼ä¸è¶…è¿‡ vx çš„è¿é€šå—
			}
			if vals[y] == vx { // å¯ä»¥æ„æˆå¥½è·¯å¾„
				ans += size[fx] * size[y] // ä¹˜æ³•åŸç†
				size[fx] += size[y]       // ç»Ÿè®¡è¿é€šå—å†…èŠ‚ç‚¹å€¼ç­‰äº vx çš„èŠ‚ç‚¹ä¸ªæ•°
			}
			fa[y] = fx // æŠŠå°çš„èŠ‚ç‚¹å€¼åˆå¹¶åˆ°å¤§çš„èŠ‚ç‚¹å€¼ä¸Š
		}
	}
	return ans
}

func main() {

	println(len("#427,#428,#429,#430,#401,#426,#431è½¦"))
}

//leetcode submit region end(Prohibit modification and deletion)
