package main

/*100217. å‡ºçŽ°é¢‘çŽ‡æœ€é«˜çš„ç´ æ•° æ˜¾ç¤ºè‹±æ–‡æè¿°
é€šè¿‡çš„ç”¨æˆ·æ•°1018
å°è¯•è¿‡çš„ç”¨æˆ·æ•°1155
ç”¨æˆ·æ€»é€šè¿‡æ¬¡æ•°1073
ç”¨æˆ·æ€»æäº¤æ¬¡æ•°2315
é¢˜ç›®éš¾åº¦Medium
ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º m x n ã€ä¸‹æ ‡ä»Ž 0 å¼€å§‹çš„äºŒç»´çŸ©é˜µ mat ã€‚åœ¨æ¯ä¸ªå•å…ƒæ ¼ï¼Œä½ å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼ç”Ÿæˆæ•°å­—ï¼š

æœ€å¤šæœ‰ 8 æ¡è·¯å¾„å¯ä»¥é€‰æ‹©ï¼šä¸œï¼Œä¸œå—ï¼Œå—ï¼Œè¥¿å—ï¼Œè¥¿ï¼Œè¥¿åŒ—ï¼ŒåŒ—ï¼Œä¸œåŒ—ã€‚
é€‰æ‹©å…¶ä¸­ä¸€æ¡è·¯å¾„ï¼Œæ²¿ç€è¿™ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œå¹¶ä¸”å°†è·¯å¾„ä¸Šçš„æ•°å­—æ·»åŠ åˆ°æ­£åœ¨å½¢æˆçš„æ•°å­—åŽé¢ã€‚
æ³¨æ„ï¼Œæ¯ä¸€æ­¥éƒ½ä¼šç”Ÿæˆæ•°å­—ï¼Œä¾‹å¦‚ï¼Œå¦‚æžœè·¯å¾„ä¸Šçš„æ•°å­—æ˜¯ 1, 9, 1ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªæ–¹å‘ä¸Šä¼šç”Ÿæˆä¸‰ä¸ªæ•°å­—ï¼š1, 19, 191 ã€‚
è¿”å›žåœ¨éåŽ†çŸ©é˜µæ‰€åˆ›å»ºçš„æ‰€æœ‰æ•°å­—ä¸­ï¼Œå‡ºçŽ°é¢‘çŽ‡æœ€é«˜çš„ã€å¤§äºŽ 10çš„ç´ æ•°ï¼›å¦‚æžœä¸å­˜åœ¨è¿™æ ·çš„ç´ æ•°ï¼Œåˆ™è¿”å›ž -1 ã€‚å¦‚æžœå­˜åœ¨å¤šä¸ªå‡ºçŽ°é¢‘çŽ‡æœ€é«˜çš„ç´ æ•°ï¼Œé‚£ä¹ˆè¿”å›žå…¶ä¸­æœ€å¤§çš„é‚£ä¸ªã€‚

æ³¨æ„ï¼šç§»åŠ¨è¿‡ç¨‹ä¸­ä¸å…è®¸æ”¹å˜æ–¹å‘ã€‚*/

func mostFrequentPrime(mat [][]int) int {

	n := len(mat)
	m := len(mat[0])
	dir := [][]int{{0, -1}, {-1, -1}, {-1, 0}, {-1, 1}, {0, 1}, {1, 1}, {1, 0}, {1, -1}}

	cnt := make(map[int]int)
	for i, v := range mat {
		for j, e := range v {
			x, y := i, j
			for _, d := range dir {
				newX, newY := x+d[0], y+d[1]
				cur := e
				for newX >= 0 && newX < n && newY >= 0 && newY < m {
					cur = cur*10 + mat[newX][newY]
					if cnt[cur] > 0 || check(cur) {
						cnt[cur]++
					}
					newX, newY = newX+d[0], newY+d[1]
				}
			}
		}
	}
	ans, maxCnt := -1, 0
	for k, v := range cnt {
		if v > maxCnt {
			ans, maxCnt = k, v
		}
		if v == maxCnt {
			ans = max(ans, k)
		}
	}
	return ans
}

func check(v int) bool {
	for i := 2; i*i <= v; i++ {
		if v%i == 0 {
			return false
		}
	}
	return true
}

// ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º m x n ã€ä¸‹æ ‡ä»Ž 0 å¼€å§‹çš„äºŒç»´çŸ©é˜µ mat ã€‚åœ¨æ¯ä¸ªå•å…ƒæ ¼ï¼Œä½ å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼ç”Ÿæˆæ•°å­—ï¼š
//
// æœ€å¤šæœ‰ 8 æ¡è·¯å¾„å¯ä»¥é€‰æ‹©ï¼šä¸œï¼Œä¸œå—ï¼Œå—ï¼Œè¥¿å—ï¼Œè¥¿ï¼Œè¥¿åŒ—ï¼ŒåŒ—ï¼Œä¸œåŒ—ã€‚
// é€‰æ‹©å…¶ä¸­ä¸€æ¡è·¯å¾„ï¼Œæ²¿ç€è¿™ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œå¹¶ä¸”å°†è·¯å¾„ä¸Šçš„æ•°å­—æ·»åŠ åˆ°æ­£åœ¨å½¢æˆçš„æ•°å­—åŽé¢ã€‚
// æ³¨æ„ï¼Œæ¯ä¸€æ­¥éƒ½ä¼šç”Ÿæˆæ•°å­—ï¼Œä¾‹å¦‚ï¼Œå¦‚æžœè·¯å¾„ä¸Šçš„æ•°å­—æ˜¯ 1, 9, 1ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªæ–¹å‘ä¸Šä¼šç”Ÿæˆä¸‰ä¸ªæ•°å­—ï¼š1, 19, 191 ã€‚
//
// è¿”å›žåœ¨éåŽ†çŸ©é˜µæ‰€åˆ›å»ºçš„æ‰€æœ‰æ•°å­—ä¸­ï¼Œå‡ºçŽ°é¢‘çŽ‡æœ€é«˜çš„ã€å¤§äºŽ 10çš„è´¨æ•°ï¼›å¦‚æžœä¸å­˜åœ¨è¿™æ ·çš„è´¨æ•°ï¼Œåˆ™è¿”å›ž -1 ã€‚å¦‚æžœå­˜åœ¨å¤šä¸ªå‡ºçŽ°é¢‘çŽ‡æœ€é«˜çš„è´¨æ•°ï¼Œé‚£ä¹ˆè¿”å›žå…¶ä¸­æœ€å¤§
// çš„é‚£ä¸ªã€‚
//
// æ³¨æ„ï¼šç§»åŠ¨è¿‡ç¨‹ä¸­ä¸å…è®¸æ”¹å˜æ–¹å‘ã€‚
//
// ç¤ºä¾‹ 1ï¼š
//
// è¾“å…¥ï¼šmat = [[1,1],[9,9],[1,1]]
// è¾“å‡ºï¼š19
// è§£é‡Šï¼š
// ä»Žå•å…ƒæ ¼ (0,0) å‡ºå‘ï¼Œæœ‰ 3 ä¸ªå¯èƒ½çš„æ–¹å‘ï¼Œè¿™äº›æ–¹å‘ä¸Šå¯ä»¥ç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰ï¼š
// ä¸œæ–¹å‘: [11], ä¸œå—æ–¹å‘: [19], å—æ–¹å‘: [19,191] ã€‚
// ä»Žå•å…ƒæ ¼ (0,1) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰ï¼š[19,191,19,11] ã€‚
// ä»Žå•å…ƒæ ¼ (1,0) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰ï¼š[99,91,91,91,91] ã€‚
// ä»Žå•å…ƒæ ¼ (1,1) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰ï¼š[91,91,99,91,91] ã€‚
// ä»Žå•å…ƒæ ¼ (2,0) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰ï¼š[11,19,191,19] ã€‚
// ä»Žå•å…ƒæ ¼ (2,1) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰ï¼š[11,19,19,191] ã€‚
// åœ¨æ‰€æœ‰ç”Ÿæˆçš„æ•°å­—ä¸­ï¼Œå‡ºçŽ°é¢‘çŽ‡æœ€é«˜çš„è´¨æ•°æ˜¯ 19 ã€‚
//
// ç¤ºä¾‹ 2ï¼š
//
// è¾“å…¥ï¼šmat = [[7]]
// è¾“å‡ºï¼š-1
// è§£é‡Šï¼šå”¯ä¸€å¯ä»¥ç”Ÿæˆçš„æ•°å­—æ˜¯ 7 ã€‚å®ƒæ˜¯ä¸€ä¸ªè´¨æ•°ï¼Œä½†ä¸å¤§äºŽ 10 ï¼Œæ‰€ä»¥è¿”å›ž -1 ã€‚
//
// ç¤ºä¾‹ 3ï¼š
//
// è¾“å…¥ï¼šmat = [[9,7,8],[4,6,5],[2,8,6]]
// è¾“å‡ºï¼š97
// è§£é‡Šï¼š
// ä»Žå•å…ƒæ ¼ (0,0) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰: [97,978,96,966,94,942] ã€‚
// ä»Žå•å…ƒæ ¼ (0,1) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰: [78,75,76,768,74,79] ã€‚
// ä»Žå•å…ƒæ ¼ (0,2) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰: [85,856,86,862,87,879] ã€‚
// ä»Žå•å…ƒæ ¼ (1,0) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰: [46,465,48,42,49,47] ã€‚
// ä»Žå•å…ƒæ ¼ (1,1) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰: [65,66,68,62,64,69,67,68] ã€‚
// ä»Žå•å…ƒæ ¼ (1,2) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰: [56,58,56,564,57,58] ã€‚
// ä»Žå•å…ƒæ ¼ (2,0) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰: [28,386,24,249,26,268] ã€‚
// ä»Žå•å…ƒæ ¼ (2,1) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰: [86,82,84,86,867,85] ã€‚
// ä»Žå•å…ƒæ ¼ (2,2) å‡ºå‘ï¼Œæ‰€æœ‰å¯èƒ½æ–¹å‘ä¸Šç”Ÿæˆçš„å¤§äºŽ 10 çš„æ•°å­—æœ‰: [68,682,66,669,65,658] ã€‚
// åœ¨æ‰€æœ‰ç”Ÿæˆçš„æ•°å­—ä¸­ï¼Œå‡ºçŽ°é¢‘çŽ‡æœ€é«˜çš„è´¨æ•°æ˜¯ 97 ã€‚
//
// æç¤ºï¼š
//
// m == mat.length
// n == mat[i].length
// 1 <= m, n <= 6
// 1 <= mat[i][j] <= 9
//
// Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ æ•°å­¦ è®¡æ•° æžšä¸¾ çŸ©é˜µ æ•°è®º ðŸ‘ 4 ðŸ‘Ž 0

// leetcode submit region begin(Prohibit modification and deletion)
func mostFrequentPrime2(mat [][]int) int {

	n := len(mat)
	m := len(mat[0])
	dir := []int{-1, 0, 1}

	cnt := make(map[int]int)
	for i, v := range mat {
		for j, e := range v {
			x, y := i, j
			for _, c := range dir {
				for _, r := range dir {
					if c == r && r == 0 {
						continue
					}
					newX, newY := x+c, y+r
					cur := e
					for newX >= 0 && newX < n && newY >= 0 && newY < m {
						cur = cur*10 + mat[newX][newY]
						if cnt[cur] > 0 || check(cur) {
							cnt[cur]++
						}
						newX, newY = newX+c, newY+r
					}
				}

			}
		}
	}
	ans, maxCnt := -1, 0
	for k, v := range cnt {
		if v > maxCnt {
			ans, maxCnt = k, v
		}
		if v == maxCnt {
			ans = max(ans, k)
		}
	}
	return ans
}

//leetcode submit region end(Prohibit modification and deletion)
